---
title: "Patrones en la sintomatología depresiva de participantes estudio ELSOC"
subtitle: "Minería de Datos con Python"
author: "T. Arriaza, C. Delgado, S. Urquizo"
date: "13 Junio 2022"
output:
  xaringan::moon_reader:
    css: xaringan-themer.css
---

```{r xaringan-themer, include=FALSE, warning=FALSE}
library(xaringanthemer)
library(tidyverse)
library(kableExtra)
options(knitr.table.format = "html") 
knitr::opts_chunk$set(echo = FALSE,
                      warning = FALSE,
                      message = FALSE)

style_mono_accent(
  base_color = '#21918c',
  header_font_google = google_font("Josefin Sans"),
  text_font_google   = google_font("Montserrat", "300", "300i"),
  code_font_google   = google_font("Fira Mono"),
  extra_css = list(
  ".small" = list("font-size" = "75%")),
  colors = c(
  azul = '#3b528b',
  morado = '#440154',
  amarillo = '#fde725',
  verde = '#21918c',
  white = "#FFFFFF"
))
```

<h1>.morado[Sobre ELSOC]</h1>

---

<h1>.morado[Sobre la escala PHQ-9]</h1>
.pull-left[

```{r}
tibble('Sintoma'=  c('Poco interés', 'Decaído(a)',
                     'Dificultad de sueño','Con poca energía',
                     'Problemas de apetito','Se ha sentido mal consigo mismo',
                     'Dificultad concentración',
                     'Muy lento o demasiado agitado',
                     'Ideación suicida'),
        'Código'=c('s01','s02','s03',
                    's04','s05','s06',
                    's07','s08','s09'))%>%knitr::kable(align = 'lc',
                                                       format = 'html',
                                                       full_width=FALSE,
                                                       font_size=9)
```

]
.pull-right[
Durante las **.morado[últimas dos semanas]:** 

*¿Qué tan seguido ha tenido molestias debido a los siguientes problemas?*

**.morado[Nunca]** **.morado[Algunos]** **.morado[Varios]** **.morado[Todos]**
]

---

<h1> .morado[Visualización datos] </h1>

<iframe src="GRAFICOS/freq-sinto.html" width="100%" height="400" id="igraph" scrolling="no" seamless="seamless" frameBorder="0"> </iframe>

Frecuencia relativa de los síntomas según **.morado[intesidad]** del síntoma.

---

<h1> Algoritmo K-Modes </h1>

Al igual que el algoritmo **.verde[K-means]** busca encontrar observaciones con características similares entre sí, pero distintas entre grupos.

**.verde[K-modes]** ocupa las modas de las distintas variables como centro de masa para definir **.verde[similaridad]**.

A partir de **.verde[k-modas iniciales]**, se ubica la observación al cluster más cercano según la medida de **.verde[disimiltud]**. Podemos definir la función $d_{sim}(x,y)$, que toma dos vectores de p dimensiones y suma los componentes donde tengan el mismo valor. 

La **.verde[función de pérdida]** es la suma total de la disimilitud de las observaciones respecto a su centroide asignado:

$$\sum^{k}_{j=1}\sum^{m_j}_{i=1}\text{d}_{sim}(x_{ij},c_j)$$

---

<h1> Número óptimo de clusters </h1>

<iframe src="GRAFICOS/costo_cluster.html" width="100%" height="400" id="igraph" scrolling="no" seamless="seamless" frameBorder="0"> </iframe>

---

<h1> Proporción clusters </h1>

<iframe src="GRAFICOS/props_cluster.html" width="100%" height="400" id="igraph" scrolling="no" seamless="seamless" frameBorder="0"> </iframe>



---
<h1> Centroides clusters </h1>

.pull-left[
Los centroides corresponden a la **.verde[moda]** de cada columna dentro de un cluster
]

.pull-right[

```{r}
modas_cl <- read_csv("DATOS/modas_cl.csv")%>%select(-'...1')
knitr::kable(modas_cl,
       format = 'html')
```

]

---

<h1> .azul[Interpretación de los clusters] </h1>

<iframe src="GRAFICOS/sintomas_por_cluster.html" width="100%" height="400" id="igraph" scrolling="no" seamless="seamless" frameBorder="0"> </iframe>

---

<h1> .azul[Desempeño K-Modes] </h1>

.pull-left[
Podemos intentar replicar el Indice de **.azul[Davies-Bouldin]** y comparar qué tan cerca están los puntos a su centroide respecto a la distancia entre centroides.

De este modo:
* **.azul[C0C1:]** 0.78
* **.azul[C0C2:]** 0.75
* **.azul[C1C2:]** 1.14
]

.pull-right[
```{r}
knitr::kable(tibble('Cluster'=c(0,1,2),
       'Dist dentro'=c(1.91,2.78,4.09)),
       format = 'html')

```

```{r}
d_01 <- round((1.91+2.78)/6,2)
d_02 <- round((1.91+4.09)/8,2)
d_12 <- round((2.78+4.09)/6,2)
```



]

---
<h1> .amarillo[Comentarios y conclusiones] </h1>
